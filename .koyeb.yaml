version: '1'
services:
  - name: clonador
    type: web
    docker:
      image: node:18
      build:
        commands:
          - apt-get update
          - apt-get install -y wget gnupg
          - wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add -
          - echo "deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main" > /etc/apt/sources.list.d/google-chrome.list
          - apt-get update
          - apt-get install -y google-chrome-stable
          - npm ci
      run:
        command: npm start
    ports:
      - port: 3000
        protocol: http
    environment:
      - name: PORT
        value: 3000
      - name: PUPPETEER_EXECUTABLE_PATH
        value: /usr/bin/google-chrome
